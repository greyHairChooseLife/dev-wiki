# 개발서버용 인스턴스 템플릿



### 1. User Data에 사용할 최적화 스크립트

이 스크립트는 Docker 공식 설치 스크립트를 사용하여 단계를 최소화했으며, `ubuntu` 사용자가 즉시 `docker` 명령어를 쓸 수 있도록 설정합니다.

````bash
#!/bin/bash
# 업데이트 및 필수 패키지 설치
apt-get update -y
apt-get install -y curl

# Docker 공식 자동 설치 스크립트 실행
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# Docker 서비스 시작 및 활성화
systemctl enable --now docker

# ubuntu 사용자를 docker 그룹에 추가 (로그인 시 바로 적용됨)
usermod -aG docker ubuntu

# Docker Compose는 최신 Docker 엔진에 플러그인으로 포함되어 있음 (docker compose로 사용 가능)
````

### 2. 실행 방법 (가장 간편한 루틴)

1.  **EC2 인스턴스 생성 화면**으로 이동합니다.
2.  **Advanced Details (세부 정보)** 섹션을 펼칩니다.
3.  가장 아래에 있는 **User data** 입력란에 위 스크립트를 그대로 붙여넣습니다.
4.  인스턴스를 생성합니다.

### 3. 더 편하게 만드는 방법: 시작 템플릿(Launch Template) 활용

매번 스크립트를 붙여넣는 것도 번거롭다면 '시작 템플릿'을 만드세요.

1.  EC2 콘솔 왼쪽 메뉴에서 **Launch Templates** 클릭 -> **Create launch template** 클릭.
2.  이름(예: `Ubuntu-24.04-Docker`)을 정하고, AMI(Ubuntu 24.04)와 인스턴스 유형을 선택합니다.
3.  **Advanced details**의 **User data**에 위 스크립트를 미리 넣어둡니다.
4.  이제 인스턴스를 만들 때 **Launch instance from template**을 선택하면 스크립트 입력 없이 바로 도커가 설치된 서버가 생성됩니다.

### 주의사항
*   **첫 접속 시:** User Data 스크립트는 인스턴스가 처음 부팅될 때 실행됩니다. 사양이 낮은 인스턴스에서는 부팅 후 도커 설치가 완료될 때까지 약 1~2분 정도 시간이 걸릴 수 있습니다.
*   **권한 적용:** User Data를 통해 그룹에 추가된 경우, SSH로 처음 접속할 때부터 `sudo` 없이 `docker` 명령어를 바로 사용할 수 있습니다.
